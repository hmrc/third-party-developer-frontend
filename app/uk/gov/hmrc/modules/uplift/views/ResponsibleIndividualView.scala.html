@*
 * Copyright 2022 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.modules.uplift.controllers.UpliftJourneyController.ResponsibleIndividualForm
@import domain.models.applications.ApplicationId
@import domain.models.developers.DeveloperSession
@import domain.models.views.BackButtonWithJavaScript
@import include._
@import uk.gov.hmrc.thirdpartydeveloperfrontend.config.ApplicationConfig

@this(devMain: DevMain2)

@(applicationId: ApplicationId, form: Form[ResponsibleIndividualForm])(implicit request: play.api.mvc.Request[Any], loggedIn: DeveloperSession, messagesProvider: MessagesProvider, appConfig: ApplicationConfig)

@titleError = {@if(form.errors.nonEmpty) {Error: } else {}}
@title = @{ "Responsible individual details" }

@devMain(
  title = titleError + title,
  userFullName = loggedIn.loggedInName,
  back = BackButtonWithJavaScript,
  developerSession = Some(loggedIn)
) {
    @errorSummary2(form)

    <h1 class="govuk-heading-l">Provide details for a responsible individual in your organisation</h1>

    <p class="govuk-body">The responsible individual:</p>
    <ul class="govuk-list govuk-list--bullet">
        <li>ensures your software meets our terms of use <a href="/api-documentation/docs/terms-of-use" class="govuk-link">terms of use</a></li>
        <li>understands the <a href="/api-documentation/docs/terms-of-use" class="govuk-link">consequences of not meeting the terms of use</a></li>
    </ul>

    @helper.form(action = uk.gov.hmrc.modules.uplift.controllers.routes.UpliftJourneyController.responsibleIndividualAction(applicationId), 'class -> "form") {
        <div class="form-field-group">
        @helper.CSRF.formField

            <div class="govuk-form-group @if(form.errors("fullName").nonEmpty){govuk-form-group--error}">
                <label class="govuk-label govuk-!-font-weight-bold" for="fullName">Full name</label>

                <span id="fullName-error" class="govuk-error-message">
                    <span class="govuk-visually-hidden">Error:</span> @fieldError2(form.errors, "fullName", true)
                </span>

                <input class="govuk-input @if(form.errors("fullName").nonEmpty){form-control-error}"
                id="fullName"
                type="text"
                name="fullName"
                value="@form.data.getOrElse("fullName", "")"
                aria-required="true">
            </div>

            <div class="govuk-form-group @if(form.errors("emailAddress").nonEmpty){govuk-form-group--error}">
                <label class="govuk-label govuk-!-font-weight-bold" for="emailAddress">Email address</label>

                <span id="emailAddress-error" class="govuk-error-message">
                    <span class="govuk-visually-hidden">Error:</span> @fieldError2(form.errors, "emailAddress", true)
                </span>

                <input class="govuk-input @if(form.errors("emailAddress").nonEmpty){form-control-error}"
                id="emailAddress"
                type="text"
                name="emailAddress"
                value="@form.data.getOrElse("emailAddress", "")"
                aria-required="true">
            </div>

            <button class="govuk-button" id="submit" type="submit">Save and continue</button>

        </div>
    }
}
